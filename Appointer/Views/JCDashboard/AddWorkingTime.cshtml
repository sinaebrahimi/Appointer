@model Appointer.Models.WorkingTime

@{
    ViewBag.Title = "AddWorkingDate";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<hr />

<h3></h3>
<br />
<div class="fullpage-form">
    <div class="info">
        <div class="info-title"><strong>افزودن روز کاری</strong></div>
        <hr>
    </div>
    @ViewBag.Error
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="col-sm-4 col-sm-offset-4">
            <div class="col-xs-12">

                <select title="روزهای هفته" name="WeekDayId" id="WeekDayId" multiple="multiple" class="js-example-basic-multiple">

                    <option value="6">شنبه</option>

                    <option value="0">یکشنبه</option>

                    <option value="1">دوشنبه</option>

                    <option value="2">سه‌شنبه</option>

                    <option value="3">چهارشنبه</option>

                    <option value="4">پنج‌شنبه</option>

                    <option value="5">جمعه</option>
                </select>


                @*<div class="input-group clockpicker">
                    <input type="text" class="form-control clockpicker" value = "10:00" />

                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-time"></span>
                    </span>
                </div>*@
                
                    <div class="panel panel-default">
                        <div class="panel-heading">ساعت شروع و پایان</div>
                        <div class="panel-body">
                            <div class="editor-field att-wrapper"></div>
                        </div>
                        <div class="plus">
                            <a id="Add_att" href="#">
                                <i class="fa fa-plus-circle" aria-hidden="true"></i><br />
                            </a>
                        </div>
                    </div>
                

        @*<div class="input-group clockpicker">
              <input type="text" name="" class="form-control" value="09:30">

              <span class="input-group-addon">
                  <span class="glyphicon glyphicon-time"></span>
              </span>
          </div>*@


                @*<div class="input-group clockpicker">

                    @Html.EditorFor(model => model.end, new
              {
                  @class = "form-control",
                  value = "10:00"
              })
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-time"></span>
                    </span>
                </div>*@

            </div>


            <div class="col-xs-8 col-xs-offset-2">
                <button class="btn btn-sm btn-primary btn-block" type="submit" value="Add">ثبت زمان</button>
            </div>
        </div>
    }
    @*@{

            private AppointerEntities db = new AppointerEntities();
            var hasWorkingTimes = db.WorkingTimes.Any(p => p.JobCorp.UserId == SessionPersister.UserId);
        }
        @if ()
        {*@
    <div>
        @*<h3>زمان های کار</h3>*@
        <br />
        <table class="table">
            <tr>
                <th>
                    @Html.DisplayName("تاریخ")
                </th>
                <th>
                    @Html.DisplayName(" شروع")
                </th>
                <th>
                    @Html.DisplayName(" پایان")
                </th>
            </tr>

            @foreach (Appointer.Models.WorkingTime wt in ViewBag.WorkingTimes)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => wt.StartTime)
                    </td>
                    @{string StartHHmm = wt.StartTime.ToString("HH:mm");  }

                    <td>
                        @Html.DisplayFor(modelItem => StartHHmm)
                    </td>

                    @{string EndHHmm = wt.EndTime.ToString("HH:mm");  }
                    <td>
                        @Html.DisplayFor(modelItem => EndHHmm)
                    </td>
                </tr>
                        }
        </table>
    </div>




</div>


@section styles{
    <link href="~/Scripts/JsDatePicker/PersianDatePicker.min.css" rel="stylesheet" />
    <link href="~/Scripts/JsDatePicker/clockpicker.css" rel="stylesheet" />
    <link href="~/Scripts/JsDatePicker/select2.min.css" rel="stylesheet" />

}


@section Scripts {

    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/JsDatePicker/PersianDatePicker.min.js"></script>
    <script src="~/Scripts/JsDatePicker/select2.min.js"></script>
    <script src="~/Scripts/JsDatePicker/clockpicker.js"></script>
    <script type="text/javascript">
        $(".js-example-basic-multiple").select2();
        var i = -1;
        $(function () {
            //$(".editor-field.att-wrapper").append('<div id="me" class="input-group clockpicker"></div>');
            var count_att = 0;
            $("#Add_att").click(function () {
                i++;
                var x = $('<div class="input-group clockpicker"><span>از:&nbsp;</span><span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span><input type="text" id="Range_' + i + '__StartHour" name="Range[' + i + '].StartHour" class="form-control" value="08:30"></div><br/>');
                var y = $('<div class="input-group clockpicker"><span>تا:&nbsp;</span><span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span><input type="text" id="Range_' + i + '__EndHour" name="Range[' + i + '].EndHour" class="form-control" value="16:30"></div>');

                $(".editor-field.att-wrapper").append('<br/>مدت زمان کاری ' + ++count_att + '<br/>').append(x).append(y);


                x.clockpicker();
                y.clockpicker();
            });
            //<div class="input-group clockpicker"><span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span><input type="text" id="Range_' + i + '__StartHour" name="Range[' + i + '].StartHour" class="form-control" data-val="true" data-val-required="لطفا فیلد ساعت را پر کنید" value="09:30"></div>
           // alert($('#me').length);
        });
       // 

    </script>

}